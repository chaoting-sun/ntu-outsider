type Query {
  user(name: String!): [User!]!
  post(postId: String!): Post!
  queryChatBox(name1: ID!, name2: ID!): ChatBox!
  queryUser(acconut: String!, password: String!): User
  queryPost(type: String!, queryString: String!): Post
  postByTitle(title: String!): [Post!]!
  queryPostCollection(userId: String!, type: String! ): [Post]!
  queryChatBoxes(userId: ID!): [ChatBox!]!
}

scalar DateTime # ref: https://v1.prisma.io/forum/t/couldnt-find-type-datetime-in-any-of-the-schemas/4310/3
type Post {
  _id: ID!
  userId: ID!
  author: User!
  title: String!
  classNo: String!
  className: String!
  teacher: String!
  content: String!
  condition: String!
  deadline: DateTime! # 先暫時用 scalar 做某種轉換，還找不到其他更好的 DateTime 表示法
  tag: [String]
}

type User {
  _id: ID!
  name: String!
  password: String!
  email: String!
  postCollection: [ID]
}


type ChatBox {
  name: String!
  messages: [Message!]
}

type Message {
  sender: String!
  body: String!
}

type Mutation {
  createAccount(account: String!, name: String!, password: String!): User!
  updateUser(userId: ID!, name: String!, account: String!): User!
  updatePassword(userId: ID!, oldpassword: String!, newPassword: String!): User!
  deleteUser(userId: ID!): User!

  createPost(
    userId: ID!
    title: String!
    classNo: String!
    className: String!
    teacher: String!
    content: String!
    condition: String!
    deadline: DateTime!
    tag: [String]
  ): Post!

  updatePost(
    postId: ID!
    title: String!
    content: String!
    classNo: String!
    className: String!
    teacher: String!
    condition: String!
    deadline: DateTime!
    tag: [String]
  ): Post!
  deletePost(postId: ID!): Post!
  updatePostCollection(userId: ID!, postId: ID!): User!

  createChatBox(name: ID!, to: ID!): ChatBox!
  createMessage(name: ID!, to: ID!, message: String!): Message!
}

# type Subscription {

# }
